<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <title>CS 498 DDV Narrative Visualization</title>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
	<style>
	body {
	  font: 12px sans-serif;
	}
h1 { 
    display: block;
    font-size: 2em;
    margin-top: 0.67em;
    margin-bottom: 0.67em;
    margin-left: 10px;
    margin-right: 2em;
    font-weight: bold;
}
	.axis path,
	.axis line {
	  fill: none;
	  stroke: #000;
	  shape-rendering: crispEdges;
	}

	.dot {
	  stroke: #000;
	}

	.legend {
      overflow: auto;
      height: 200px;  
      width: 50px;  
        }

    .line {
  fill: none;
  stroke: #444;
  stroke-width: 1.5px;
}

	.tooltip {
	position: absolute;
	text-align: center;
	width: 140px;
	height: 85px;
	padding: 2px;
	font: 12px sans-serif;
	background: lightsteelblue;
	border: 0px;
	border-radius: 8px;
	pointer-events: none;
	}
	.tooltip2 {
	position: absolute;
	text-align: center;
	width: 85px;
	height: 60px;
	padding: 2px;
	font: 12px sans-serif;
	background: lightsteelblue;
	border: 0px;
	border-radius: 8px;
	pointer-events: none;
	}


	.radio{
	text-align: left;
	}
	.row{
	text-align: left;
	}

	form {
	position: absolute;
	right: 12px;
	top: 10px;
	}
	.node {
	border: solid 1px white;
	font: 15px sans-serif;
	line-height: 12px;
	overflow: hidden;
	position: absolute;
	text-indent: 2px;
	}
	</style>
    </head>
    <body>

<div class="tabbable">
    <ul class="nav nav-pills nav-justified">

        <li><a class="btab" href="#b_tab" data-toggle="tab">Depth Range Distribution</a></li>
		<li><a class="ctab" href="#c_tab" data-toggle="tab">Sensor Effectiveness</a></li>
		<li><a class="dtab" href="#d_tab" data-toggle="tab">About the Visualization</a></li>				
    </ul>

    <div class="tab-content">
        <div class="tab-pane " id="a_tab">
            <h1>Distribution of Data Collected by Station ID</h1>
            <acontent></acontent>
        </div>
        <div class="tab-pane active " id="b_tab">
            <h1>Depth Range Distribution by Station ID</h1>
           	<p  style="margin-left:2.5em;margin-right:2.5em">The use of current sensors for tracking the current velocity under water is widely used offshore by scientific institutions and oil field companies.They report the velocity as well as data health metrics such as "%Good" that tells us the percent of good quality data collected. The %Good is the ratio of data that passed quality checks and total data collected.  
				<br>
				<br>
           		This plot of percent of Good data collected at different offshore Stations show the correlation between percent good and the effectiveness of the sensor. The effectiveness is defined in terms of the depth range the sensor can read current velocity.

           	 </p>

            <bcontent></bcontent>
        </div>
		<div class="tab-pane" id="c_tab">
            <h1>Sensor Effectiveness in 2017 by Owner</h1>
            <p style="margin-left:2.5em;margin-right:2.5em">The current sensor's effectiveness can be effected by many factors. One of the main reason for poor readings is environmental. Examining the effectiveness at different Stations in terms of time we can see that Hurricanes played a large role in sensors collecting bad data or being removed.</p>
            <ccontent></ccontent>

        </div>
		<div class="tab-pane" id="d_tab">
            <h1>About the Visualization</h1>
			<p p style="margin-left: 2.5em;margin-right: 2.5em;padding: 5 7em 2em 5;border-width: 2px; border-color: black; border-style:solid;">

This narrative visualization investigates the useful range of ocean current meters in the year 2017. The current data is collected using Acoustic Doppler Current Profiler(ADCP) sensor. The scenes in the narrative qualify the effectiveness of the sensor in terms of Percent Good and of the Depth Range for the readings taken over time. The scenes identify the changes of sensor effectiveness over the year annotation key events. ADCP data is collected by the National Oceanic and Atmospheric Administrationâ€™s National Data Buoy Center (NDBC) for scientific purposes to increase understanding of the ocean. The NDBC collects the data from sensors all over the world. Each Sensor location is assigned a Station Id by the NDBC and has an Owner. This project is focused on a sample size of oil companies from the Gulf of Mexico .<br> <br> 
The sensor builds a data packet that includes a timestamp, location, velocity, direction, and Percent Good along with other data that is beyond the scope of this project. We are plotting the amount of data collected and the Percent Good greater than 90 for each data package. <br> <br>
<b>Narative Structure</b>
<br> <br>
I implemented the Martini Glass hybrid structure for this visual narrative. There are 2 main scenes in the narrative. The webpage is setup so that the user arrives at the first scene and can then tab over to the next scene. The first scene is author-driven and gives an overview of the overall data that is being presented. It gives the user a reference to the amount of data being collected and how the quality of the data affects the Depth Range. The plot is has annotated clusters of high quality data and of low quality data collected. The annotations draw the users attention to the quality issues and how they affect the sensors range.<br> <br>
The user can then press the tab for the next scene. The next scene plots the sensor effectiveness by owner and is user driven. The second scene is made up of a coordinated set of bar charts. The user is allowed to filter the content being displayed according to the owner parameter. The plot updates according to which data the user is interested in viewing. The annotations stay the same for each owner as the data changes.<br> <br>
In the opening scene the user arrives at Depth Range Distribution plot for the overview of the data and can then navigate to the next scene or to the About the Visualization page. The tabs allow for the user random access to the different scenes after the user views the first opening  scene. After the first scene the user is able to go backwards and forwards to examine all of the data. The tabs for Depth Range Distribution, Sensor Effectiveness trigger the parameter of which slide should be shown to the user. The slide is the parameter and the tabs that the user clicks are triggers that changes what data is shown and what annotations to include in the plot. The annotations are different from the Depth Range Distribution and the Sensor Effectiveness plots.<br> <br>  
<b>Depth Range Distribution</b><br> <br>
The first scene of the Martini Glass structure is the Depth Range Distribution plot. It plots the depth range of each station that is included in the dataset. The dots plotted are color coded to the percentage of  good data that is received from the sensor and are sized according to amount of data collected at each station in 2017. <br> <br>
This plot gives the user a sense of the amount of data collected at each station and the quality of that data. The annotations on the plot draws the users attention two clusters of data on the plot. The first annotation shows a cluster of data that is colored red for low quality and is around the 500 meter depth range. The second cluster is of data that is colored green and denotes high quality data and is around 900 meters. This shows that the user how higher quality data extends the range of the sensor. The circle annotations show groups of data that are of similar quality and of similar size. This way we are comparing data that has similar dimensions and can draw better conclusions. The text at the top of the plot is also meant to guide the reader to focus on the Depth Range of the Sensor and the clustering of data as a whole. The parameters for this scene are set since we are looking at the data for the entire year 2017.<br> <br>
The user can then go to the second scene by clicking one of the tabs and transitioning to the next plot. The user can also go to the About the Visualization essay from the opening scene. <br> <br>  

<b>Sensor Effectiveness</b><br> <br>
The second scene is the Sensor Effectiveness plot that it shows all of the stations and plots their percent good on a bar chart. The chart has all of the stations and can be filtered according to the owner of the station.This scene is coordinated set of charts. The chart shows how the quality of sensor data fluctuates over the year monthly. From the plot we can see that there are consistent stations and some that drop off and come back up  in quality. There are many reasons for change in data quality. <br> <br>
The scene has annotations that show two significant events in the Gulf of Mexico during the year. The first is Hurricane Harvey annotation that is on the chart around the time the hurricane was in the Gulf. From the chart we can see that the quality of many sensors disappear of go way down in this time frame. The second is Hurricane Irma where we see more sensor data disappear. The annotations stay from one scene to another as the data is filtered. The annotations staying the same  helps keep the viewers oriented through the transitions between the filtered charts. <br> <br>
The triggers in this scene are the different radio buttons at the bottom. Each button changes the owner parameter for the chart. We can trigger the owner parameter and filter the data being presented by owner. The plot can show all stations or will only show the stations operated by the owner selected with the trigger. It is clearer to see the stations where data quality goes down or completely disappear when the data is filtered and you can focus on the individual stations. The annotations stay the same to allow the user to see how quality changes after that trigger and parameter change. The triggers change the width of the bars on the chart to keep the chart the same and keep the chart more uniform. The bar colors also stay the same and is the reason why the legend always shows the same colors. 

			</p>

            <dcontent></dcontent>
        </div>
    </div>

</div>
<div class='container'>
	<div class='row'>
		<div id= 'y' class='radio'>
			<label class='radio-inline'>
				<input type="radio" name="owner" id="SHELL" value="SHELL" onclick='change(this.value)'> SHELL
			</label>
			<label class='radio-inline'>
				<input type="radio" name="owner" value="BP" onclick='change(this.value)'> BP
			</label>
			<label class='radio-inline'>
				<input type="radio" name="owner" value="CHEVRON" onclick='change(this.value)'> CHEVRON
			</label>
			<label class='radio-inline'>
				<input type="radio" name="owner" value="NOBLE" onclick='change(this.value)'> NOBLE
			</label>
			<label class='radio-inline'>
				<input type="radio" name="owner" value="CONOCO" onclick='change(this.value)'> CONOCO
			</label>						
			<label class='radio-inline'>
				<input type="radio" name="owner" value="All" onclick='change(this.value)' checked > All
			</label>
		</div>
	</div>
</div>
		
</div>   
     <script type="text/javascript" src="https://code.jquery.com/jquery-latest.js"></script>
        <script src="https://d3js.org/d3.v4.js"></script>
        <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
		


	<script type="text/javascript" src="c.js"></script>

        <script>
            $.ajaxSetup ({
                // Disable caching of AJAX responses
                // Used when debugging
                cache: false
            });
        	document.getElementById('y').style.display = 'none';
            $.getScript("b.js");
            $(".btab").click(function() {
                $.getScript("b.js");
                document.getElementById('y').style.display = 'none';

            })
        </script>
        <script>
            $(".btab").click(function() {
                $.getScript("b.js");
                document.getElementById('y').style.display = 'none';
            })
        </script>
		<script>
		     $(".ctab").click(function() {
                document.getElementById('y').style.display = 'block';
            })
		$("ccontent").empty();



		var bothData=[
		{"Owner":"SHELL","Month":"Jan","Id":"42363","Percent":"73.4"},
		{"Owner":"SHELL","Month":"Jan","Id":"42390","Percent":"58.9"},
		{"Owner":"SHELL","Month":"Jan","Id":"42394","Percent":"74.2"},
		{"Owner":"SHELL","Month":"Jan","Id":"42874","Percent":"41.2"},
		{"Owner":"BP","Month":"Jan","Id":"42901","Percent":"1.2"},
		{"Owner":"BP","Month":"Jan","Id":"42370","Percent":"69"},
		{"Owner":"BP","Month":"Jan","Id":"42374","Percent":"37"},
		{"Owner":"BP","Month":"Jan","Id":"42880","Percent":"95"},
		{"Owner":"BP","Month":"Jan","Id":"42887","Percent":"40"},
		{"Owner":"CHEVRON","Month":"Jan","Id":"42396","Percent":"0"},
		{"Owner":"CHEVRON","Month":"Jan","Id":"42876","Percent":"41.4"},
		{"Owner":"CHEVRON","Month":"Jan","Id":"42912","Percent":"51.8"},
		{"Owner":"CHEVRON","Month":"Jan","Id":"42934","Percent":"43"},
		{"Owner":"NOBLE","Month":"Jan","Id":"42927","Percent":"78.3"},
		{"Owner":"NOBLE","Month":"Jan","Id":"42931","Percent":"83.2"},
		{"Owner":"CONOCO","Month":"Jan","Id":"42368","Percent":"90.9"},


		{"Owner":"SHELL","Month":"Feb","Id":"42363","Percent":"64.8"},
		{"Owner":"SHELL","Month":"Feb","Id":"42390","Percent":"59.4"},
		{"Owner":"SHELL","Month":"Feb","Id":"42394","Percent":"74.1"},
		{"Owner":"SHELL","Month":"Feb","Id":"42874","Percent":"0.0"},
		{"Owner":"BP","Month":"Feb","Id":"42901","Percent":"0.1"},
		{"Owner":"BP","Month":"Feb","Id":"42370","Percent":"70"},
		{"Owner":"BP","Month":"Feb","Id":"42374","Percent":"34"},
		{"Owner":"BP","Month":"Feb","Id":"42880","Percent":"93"},
		{"Owner":"BP","Month":"Feb","Id":"42887","Percent":"30"},
		{"Owner":"CHEVRON","Month":"Feb","Id":"42396","Percent":"0"},
		{"Owner":"CHEVRON","Month":"Feb","Id":"42876","Percent":"52.2"},
		{"Owner":"CHEVRON","Month":"Feb","Id":"42912","Percent":"51.7"},
		{"Owner":"CHEVRON","Month":"Feb","Id":"42934","Percent":"36.5"},
		{"Owner":"NOBLE","Month":"Feb","Id":"42927","Percent":"83.6"},
		{"Owner":"NOBLE","Month":"Feb","Id":"42931","Percent":"0"},
		{"Owner":"CONOCO","Month":"Feb","Id":"42368","Percent":"87.3"},

		{"Owner":"SHELL","Month":"Mar","Id":"42363","Percent":"74.6"},
		{"Owner":"SHELL","Month":"Mar","Id":"42390","Percent":"61.4"},
		{"Owner":"SHELL","Month":"Mar","Id":"42394","Percent":"74.2"},
		{"Owner":"SHELL","Month":"Mar","Id":"42874","Percent":"0.0"},
		{"Owner":"BP","Month":"Mar","Id":"42901","Percent":"0"},
		{"Owner":"BP","Month":"Mar","Id":"42370","Percent":"74"},
		{"Owner":"BP","Month":"Mar","Id":"42374","Percent":"38"},
		{"Owner":"BP","Month":"Mar","Id":"42880","Percent":"95"},
		{"Owner":"BP","Month":"Mar","Id":"42887","Percent":"14"},
		{"Owner":"CHEVRON","Month":"Mar","Id":"42396","Percent":"0"},
		{"Owner":"CHEVRON","Month":"Mar","Id":"42876","Percent":"46.5"},
		{"Owner":"CHEVRON","Month":"Mar","Id":"42912","Percent":"58.8"},
		{"Owner":"CHEVRON","Month":"Mar","Id":"42934","Percent":"43.5"},
		{"Owner":"NOBLE","Month":"Mar","Id":"42927","Percent":"77.2"},
		{"Owner":"NOBLE","Month":"Mar","Id":"42931","Percent":"50"},
		{"Owner":"CONOCO","Month":"Mar","Id":"42368","Percent":"0"},

		{"Owner":"SHELL","Month":"Apr","Id":"42363","Percent":"76.7"},
		{"Owner":"SHELL","Month":"Apr","Id":"42390","Percent":"64.1"},
		{"Owner":"SHELL","Month":"Apr","Id":"42394","Percent":"74.2"},
		{"Owner":"SHELL","Month":"Apr","Id":"42874","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Apr","Id":"42874","Percent":"0.0"},
		{"Owner":"BP","Month":"Apr","Id":"42901","Percent":"0.0"},
		{"Owner":"BP","Month":"Apr","Id":"42370","Percent":"68"},
		{"Owner":"BP","Month":"Apr","Id":"42374","Percent":"39"},
		{"Owner":"BP","Month":"Apr","Id":"42880","Percent":"94"},
		{"Owner":"BP","Month":"Apr","Id":"42887","Percent":"10"},
		{"Owner":"CHEVRON","Month":"Apr","Id":"42396","Percent":"87.4"},
		{"Owner":"CHEVRON","Month":"Apr","Id":"42876","Percent":"50.3"},
		{"Owner":"CHEVRON","Month":"Apr","Id":"42912","Percent":"52.8"},
		{"Owner":"CHEVRON","Month":"Apr","Id":"42934","Percent":"45.6"},
		{"Owner":"NOBLE","Month":"Apr","Id":"42927","Percent":"0"},
		{"Owner":"NOBLE","Month":"Apr","Id":"42931","Percent":"0"},
		{"Owner":"CONOCO","Month":"Apr","Id":"42368","Percent":"0"},

		{"Owner":"SHELL","Month":"May","Id":"42363","Percent":"75.5"},
		{"Owner":"SHELL","Month":"May","Id":"42390","Percent":"63.3"},
		{"Owner":"SHELL","Month":"May","Id":"42394","Percent":"74.3"},
		{"Owner":"SHELL","Month":"May","Id":"42874","Percent":"0.0"},
		{"Owner":"BP","Month":"May","Id":"42901","Percent":"0.0"},
		{"Owner":"BP","Month":"May","Id":"42370","Percent":"69"},
		{"Owner":"BP","Month":"May","Id":"42374","Percent":"40"},
		{"Owner":"BP","Month":"May","Id":"42880","Percent":"96"},
		{"Owner":"BP","Month":"May","Id":"42887","Percent":"18"},
		{"Owner":"CHEVRON","Month":"May","Id":"42396","Percent":"87.5"},
		{"Owner":"CHEVRON","Month":"May","Id":"42876","Percent":"54.1"},
		{"Owner":"CHEVRON","Month":"May","Id":"42912","Percent":"56.7"},
		{"Owner":"CHEVRON","Month":"May","Id":"42934","Percent":"43.5"},
		{"Owner":"NOBLE","Month":"May","Id":"42927","Percent":"0"},
		{"Owner":"NOBLE","Month":"May","Id":"42931","Percent":"0"},
		{"Owner":"CONOCO","Month":"May","Id":"42368","Percent":"0"},

		{"Owner":"SHELL","Month":"Jun","Id":"42363","Percent":"66.2"},
		{"Owner":"SHELL","Month":"Jun","Id":"42390","Percent":"65.7"},
		{"Owner":"SHELL","Month":"Jun","Id":"42394","Percent":"74.2"},
		{"Owner":"SHELL","Month":"Jun","Id":"42874","Percent":"0.0"},
		{"Owner":"BP","Month":"Jun","Id":"42901","Percent":"96.8"},
		{"Owner":"BP","Month":"Jun","Id":"42370","Percent":"69"},
		{"Owner":"BP","Month":"Jun","Id":"42374","Percent":"42"},
		{"Owner":"BP","Month":"Jun","Id":"42880","Percent":"98"},
		{"Owner":"BP","Month":"Jun","Id":"42887","Percent":"50"},
		{"Owner":"CHEVRON","Month":"Jun","Id":"42396","Percent":"87.5"},
		{"Owner":"CHEVRON","Month":"Jun","Id":"42876","Percent":"52.6"},
		{"Owner":"CHEVRON","Month":"Jun","Id":"42912","Percent":"55.3"},
		{"Owner":"CHEVRON","Month":"Jun","Id":"42934","Percent":"36"},
		{"Owner":"NOBLE","Month":"Jun","Id":"42927","Percent":"0"},
		{"Owner":"NOBLE","Month":"Jun","Id":"42931","Percent":"0"},
		{"Owner":"CONOCO","Month":"Jun","Id":"42368","Percent":"91"},

		{"Owner":"SHELL","Month":"Jul","Id":"42363","Percent":"77.5"},
		{"Owner":"SHELL","Month":"Jul","Id":"42390","Percent":"64.3"},
		{"Owner":"SHELL","Month":"Jul","Id":"42394","Percent":"74.2"},
		{"Owner":"SHELL","Month":"Jul","Id":"42874","Percent":"0.0"},
		{"Owner":"BP","Month":"Jul","Id":"42901","Percent":"96.8"},
		{"Owner":"BP","Month":"Jul","Id":"42370","Percent":"66"},
		{"Owner":"BP","Month":"Jul","Id":"42374","Percent":"43"},
		{"Owner":"BP","Month":"Jul","Id":"42880","Percent":"94"},
		{"Owner":"BP","Month":"Jul","Id":"42887","Percent":"14"},
		{"Owner":"CHEVRON","Month":"Jul","Id":"42396","Percent":"87.5"},
		{"Owner":"CHEVRON","Month":"Jul","Id":"42876","Percent":"0"},
		{"Owner":"CHEVRON","Month":"Jul","Id":"42912","Percent":"61.4"},
		{"Owner":"CHEVRON","Month":"Jul","Id":"42934","Percent":"0"},
		{"Owner":"NOBLE","Month":"Jul","Id":"42927","Percent":""},
		{"Owner":"NOBLE","Month":"Jul","Id":"42931","Percent":"89.1"},
		{"Owner":"CONOCO","Month":"Jul","Id":"42368","Percent":"91.3"},

		{"Owner":"SHELL","Month":"Aug","Id":"42363","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Aug","Id":"42390","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Aug","Id":"42394","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Aug","Id":"42874","Percent":"92.65"},
		{"Owner":"BP","Month":"Aug","Id":"42901","Percent":"97.9"},
		{"Owner":"BP","Month":"Aug","Id":"42370","Percent":"70"},
		{"Owner":"BP","Month":"Aug","Id":"42374","Percent":"40"},
		{"Owner":"BP","Month":"Aug","Id":"42880","Percent":"97"},
		{"Owner":"BP","Month":"Aug","Id":"42887","Percent":"3.2"},
		{"Owner":"CHEVRON","Month":"Aug","Id":"42396","Percent":"87.0"},
		{"Owner":"CHEVRON","Month":"Aug","Id":"42876","Percent":"0"},
		{"Owner":"CHEVRON","Month":"Aug","Id":"42912","Percent":"60.9"},
		{"Owner":"CHEVRON","Month":"Aug","Id":"42934","Percent":"0"},
		{"Owner":"NOBLE","Month":"Aug","Id":"42927","Percent":"0"},
		{"Owner":"NOBLE","Month":"Aug","Id":"42931","Percent":"88.6"},
		{"Owner":"CONOCO","Month":"Aug","Id":"42368","Percent":"93.4"},

		{"Owner":"SHELL","Month":"Sep","Id":"42363","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Sep","Id":"42390","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Sep","Id":"42394","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Sep","Id":"42874","Percent":"89.2"},
		{"Owner":"BP","Month":"Sep","Id":"42901","Percent":"0"},
		{"Owner":"BP","Month":"Sep","Id":"42370","Percent":"0"},
		{"Owner":"BP","Month":"Sep","Id":"42374","Percent":"40"},
		{"Owner":"BP","Month":"Sep","Id":"42880","Percent":"96"},
		{"Owner":"BP","Month":"Sep","Id":"42887","Percent":"7.5"},
		{"Owner":"CHEVRON","Month":"Sep","Id":"42396","Percent":"0"},
		{"Owner":"CHEVRON","Month":"Sep","Id":"42876","Percent":"0"},
		{"Owner":"CHEVRON","Month":"Sep","Id":"42912","Percent":"50.3"},
		{"Owner":"CHEVRON","Month":"Sep","Id":"42934","Percent":"0"},
		{"Owner":"NOBLE","Month":"Sep","Id":"42927","Percent":"0"},
		{"Owner":"NOBLE","Month":"Sep","Id":"42931","Percent":"0"},
		{"Owner":"CONOCO","Month":"Sep","Id":"42368","Percent":"0"},

		{"Owner":"SHELL","Month":"Oct","Id":"42363","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Oct","Id":"42390","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Oct","Id":"42394","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Oct","Id":"42874","Percent":"93.9"},
		{"Owner":"BP","Month":"Oct","Id":"42901","Percent":"95.4"},
		{"Owner":"BP","Month":"Oct","Id":"42370","Percent":"69"},
		{"Owner":"BP","Month":"Oct","Id":"42374","Percent":"0"},
		{"Owner":"BP","Month":"Oct","Id":"42880","Percent":"92"},
		{"Owner":"BP","Month":"Oct","Id":"42887","Percent":"5.6"},
		{"Owner":"CHEVRON","Month":"Oct","Id":"42396","Percent":"86.5"},
		{"Owner":"CHEVRON","Month":"Oct","Id":"42876","Percent":"0"},
		{"Owner":"CHEVRON","Month":"Oct","Id":"42912","Percent":"60.4"},
		{"Owner":"CHEVRON","Month":"Oct","Id":"42934","Percent":"0"},
		{"Owner":"NOBLE","Month":"Oct","Id":"42927","Percent":"0"},
		{"Owner":"NOBLE","Month":"Oct","Id":"42931","Percent":"0"},
		{"Owner":"CONOCO","Month":"Oct","Id":"42368","Percent":"0"},

		{"Owner":"SHELL","Month":"Nov","Id":"42363","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Nov","Id":"42390","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Nov","Id":"42394","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Nov","Id":"42874","Percent":"0.0"},
		{"Owner":"BP","Month":"Nov","Id":"42901","Percent":"94.5"},
		{"Owner":"BP","Month":"Nov","Id":"42370","Percent":"66"},
		{"Owner":"BP","Month":"Nov","Id":"42374","Percent":"0"},
		{"Owner":"BP","Month":"Nov","Id":"42880","Percent":"33"},
		{"Owner":"BP","Month":"Nov","Id":"42887","Percent":"1.5"},
		{"Owner":"CHEVRON","Month":"Nov","Id":"42396","Percent":"87.4"},
		{"Owner":"CHEVRON","Month":"Nov","Id":"42876","Percent":"0"},
		{"Owner":"CHEVRON","Month":"Nov","Id":"42912","Percent":"0"},
		{"Owner":"CHEVRON","Month":"Nov","Id":"42934","Percent":"0"},
		{"Owner":"NOBLE","Month":"Nov","Id":"42927","Percent":"0"},
		{"Owner":"NOBLE","Month":"Nov","Id":"42931","Percent":"0.2"},
		{"Owner":"CONOCO","Month":"Nov","Id":"42368","Percent":"0"},

		{"Owner":"SHELL","Month":"Dec","Id":"42363","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Dec","Id":"42390","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Dec","Id":"42394","Percent":"0.0"},
		{"Owner":"SHELL","Month":"Dec","Id":"42874","Percent":"0.0"},
		{"Owner":"BP","Month":"Dec","Id":"42901","Percent":"95.2"},
		{"Owner":"BP","Month":"Dec","Id":"42370","Percent":"70"},
		{"Owner":"BP","Month":"Dec","Id":"42374","Percent":"0"},
		{"Owner":"BP","Month":"Dec","Id":"42880","Percent":"0"},
		{"Owner":"BP","Month":"Dec","Id":"42887","Percent":"1"},
		{"Owner":"CHEVRON","Month":"Dec","Id":"42396","Percent":"87.4"},
		{"Owner":"CHEVRON","Month":"Dec","Id":"42876","Percent":"0"},
		{"Owner":"CHEVRON","Month":"Dec","Id":"42912","Percent":"0"},
		{"Owner":"CHEVRON","Month":"Dec","Id":"42934","Percent":"0"},
		{"Owner":"NOBLE","Month":"Dec","Id":"42927","Percent":"0"},
		{"Owner":"NOBLE","Month":"Dec","Id":"42931","Percent":"0.9"},
		{"Owner":"CONOCO","Month":"Dec","Id":"42368","Percent":"0"}
		];
		//make one for each ID
		var shellData = [];
		var bpData = [];
		var nobleData= [];
		var conocoData=[];
		var chevronData = [];
		var color = d3.scaleOrdinal(d3.schemeCategory20);
		var stations = ["42390","42394","42874","42901","42370","42374","42880","42887","42396","42876","42912","42934","42927","42931","42368"];
		var shellId=["42363","42390","42394","42874"];
		var bpId=["42901","42370","42374","42880","42887"];
		var nobleId=["42927","42931"];
		var conocoId=["42368"];
		var chevronId=["42396","42876","42912","42934"];
		//var color =d3. scaleSequential(d3.interpolateInferno).domain([0,20]);
		for(var i = 0; i < bothData.length; i++){
			if(bothData[i]["Owner"] === "SHELL"){
				shellData.push(bothData[i]);
			}else if (bothData[i]["Owner"] === "BP"){
				bpData.push(bothData[i]);
			}else if (bothData[i]["Owner"] === "NOBLE"){
				nobleData.push(bothData[i]);
			}else if (bothData[i]["Owner"] === "CONOCO"){
				conocoData.push(bothData[i]);
			}else if (bothData[i]["Owner"] === "CHEVRON"){
				chevronData.push(bothData[i]);
			}
		}
		console.log(shellData);
		//functions for toggling between data
		function change(value){

			if(value === 'SHELL'){
				update(shellData);
			}else if(value === 'BP'){
				update(bpData);
			}else if(value === 'CHEVRON'){
				update(chevronData);
			}else if(value === 'NOBLE'){
				update(nobleData);
			}else if(value === 'CONOCO'){
				update(conocoData);		
			}else{
				update(bothData);
			}
		}

		function update(data){
			//set domain for the x axis
			xChart.domain(data.map(function(d){ return d.Month; }) );
			//set domain for y axis
			yChart.domain( [0, d3.max(data, function(d){ return +d.Percent ; })] );
			
			//get the width of each bar 
			var barWidth = width / data.length;
			
			//select all bars on the graph, take them out, and exit the previous data set. 
			//then you can add/enter the new data set
			var bars = chart.selectAll(".bar")
							.remove()
							.exit()
							.data(data)		
			//now actually give each rectangle the corresponding data
			bars.enter()
				.append("rect")
				.attr("class", "bar")
				.attr("x", function(d, i){ return i * barWidth + 1 })
				.attr("y", function(d){ return yChart( d.Percent); })
				.attr("height", function(d){ return height - yChart(d.Percent); })
				.attr("width", barWidth - 1)
				.attr("fill", function(d){ 
					if(d.Id === "42363"){
						return color(d.Id);
					}else if(d.Id === "42390") {
						return color(d.Id);
					}else if(d.Id === "42394") {
						return color(d.Id);
					}else if(d.Id === "42874") {
						return color(d.Id);
					}else if(d.Id === "42901") {
						return color(d.Id);
					}else if(d.Id === "42370") {
						return color(d.Id);
					}else if(d.Id === "42374") {
						return color(d.Id);
					}else if(d.Id === "42880") {
						return color(d.Id);
					}else if(d.Id === "42887") {
						return color(d.Id);
					}else if(d.Id === "42396") {
						return color(d.Id);
					}else if(d.Id === "42876") {
						return color(d.Id);
					}else if(d.Id === "42912") {
						return color(d.Id);
					}else if(d.Id === "42934") {
						return color(d.Id);
					}else if(d.Id === "42927") {
						return color(d.Id);
					}else if(d.Id === "42931") {
						return color(d.Id);
					}else if(d.Id === "42368") {
						return color(d.Id);		
					}
				})
				.on("mouseover", function(d) {
				    tooltip2.transition()
				    .duration(200)
				    .style("opacity", .9);
				    tooltip2.html(d.Owner + "<br/>ID: " + d.Id + "<br/>" 
					        + "%Good: " + d.Percent )
				        .style("left", (d3.event.pageX + 5) + "px")
				        .style("top", (d3.event.pageY - 28) + "px");
				      })
				      .on("mouseout", function(d) {
				          tooltip2.transition()
				               .duration(500)
				               .style("opacity", 0);
					  });

			chart.append("line")
				.attr("class","line")
				.attr("x1",577)
				.attr("y1",-20)
				.attr("x2",577)
				.attr("y2",450)
				.style("stroke", "black");
			chart.append("line")
				.attr("class","line")
				.attr("x1",627)
				.attr("y1",-20)
				.attr("x2",627)
				.attr("y2",450)
				.style("stroke", "black");

			chart.append("text")
				.attr("transform", "translate(582," +  -20 + ") rotate(-45)")
				.text("Hurricane Harvey");
			chart.append("text")
				.attr("transform", "translate(632," +  -20 + ") rotate(-45)")
				.text("Hurricane Irma");

			//left axis
			chart.select('.y')
				  .call(yAxis)
			//bottom axis
			chart.select('.xAxis')
				.attr("transform", "translate(0," + height + ")")
				.call(xAxis)
				.selectAll("text")
					.style("text-anchor", "end")
					.attr("dx", "-.8em")
					.attr("dy", ".15em")
					.attr("transform", function(d){
						return "rotate(-65)";
					});
 
		}//end update

		//set up chart
		var margin = {top: 105, right: 200, bottom: 40, left: 100};
		var width = 1000-margin.left;
		var height = 400;
		var offset =100;
		var chart = d3.select("ccontent").append("svg")
						.attr("width", width + margin.left + margin.right)
						.attr("height", height+ margin.top + margin.bottom)
						.append("g")
						.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

		var tooltip2 = d3.select("ccontent").append("div")
		    .attr("class", "tooltip2")
		    .style("opacity", 0);

		var xChart = d3.scaleBand()
						.range([0, width]);
						
		var yChart = d3.scaleLinear()
						.range([height, 0]);

		var xAxis = d3.axisBottom(xChart);
		var yAxis = d3.axisLeft(yChart);

		//set up axes
		//left axis
			chart.append("g")
				  .attr("class", "y axis")
				  .call(yAxis)
				  
			//bottom axis
			chart.append("g")
				.attr("class", "xAxis")
				.attr("transform", "translate(0," + height-10 + ")")
				.call(xAxis)
				.selectAll("text")
					.style("text-anchor", "end")
					.attr("dx", "-.8em")
					.attr("dy", ".15em")
					.attr("transform", function(d){
						return "rotate(-65)";
					});

		//add labels
		chart
			.append("text")
			.attr("transform", "translate(-35," +  (height+margin.bottom)/2 + ") rotate(-90)")
			.text("% Good");
				
		chart
			.append("text")
			.attr("transform", "translate(" + (width/2) + "," + (height + margin.bottom  ) + ")")
			.text("Month");
	
        var legendShell =d3.select("svg")
        	.append("g")
        	.selectAll("g")
        	.data(shellId.slice())
        	.enter().append("g")
        	.attr("class","legend")
            .attr("transform", function (d, i) {
            {
                return "translate(0," + i * 20 + ")"
            }
        });
        	legendShell.append("rect")
        	.attr("x", width+100)
        	.attr("y", offset+10)
        	.attr("width", 18)
        	.attr("height", 18)
        	.style("fill", color);

       		legendShell.append("text")
        	.attr("x", width +130)
        	.attr("y", offset+19)
        	.attr("dy", ".35em")
        	.style("text-anchor", "start")
        	.text(function(d) { return d; });
        	 
        	chart.append("text")
        	.attr("x", width)
        	.attr("y", -10)
        	.attr("dy", ".35em")
        	.style("text-anchor", "start")
        	.text("SHELL");

        var legendBP =d3.select("svg")
        	.append("g")
        	.selectAll("g")
        	.data(bpId.slice())
        	.enter().append("g")
        	.attr("class","legend")
            .attr("transform", function (d, i) {
            {
                return "translate(0," + i * 20 + ")"
            }
        	});
        	legendBP.append("rect")
        	.attr("x", width+100)
        	.attr("y", offset+100+10)
        	.attr("width", 18)
        	.attr("height", 18)
        	.style("fill", color);

       		legendBP.append("text")
        	.attr("x", width +130)
        	.attr("y", offset+100+19)
        	.attr("dy", ".35em")
        	.style("text-anchor", "start")
        	.text(function(d) { return d; });

        	chart.append("text")
        	.attr("x", width)
        	.attr("y", offset-5)
        	.attr("dy", ".35em")
        	.style("text-anchor", "start")
        	.text("BP");

        var legendChevron =d3.select("svg")
	       	.append("g")
        	.selectAll("g")
        	.data(chevronId.slice())
        	.enter().append("g")
        	.attr("class","legend")
            .attr("transform", function (d, i) {
            {
                return "translate(0," + i * 20 + ")"
            }
        	});
        	legendChevron.append("rect")
        	.attr("x", width+100)
        	.attr("y", offset+220+10)
        	.attr("width", 18)
        	.attr("height", 18)
        	.style("fill", color);

       		legendChevron.append("text")
        	.attr("x", width +130)
        	.attr("y", offset+220+19)
        	.attr("dy", ".35em")
        	.style("text-anchor", "start")
        	.text(function(d) { return d; });

        	chart.append("text")
        	.attr("x", width)
        	.attr("y", offset+120-5)
        	.attr("dy", ".35em")
        	.style("text-anchor", "start")
        	.text("CHEVRON");

        var legendNoble =d3.select("svg")
	       	.append("g")
        	.selectAll("g")
        	.data(nobleId.slice())
        	.enter().append("g")
        	.attr("class","legend")
            .attr("transform", function (d, i) {
            {
                return "translate(0," + i * 20 + ")"
            }
        	});
        	legendNoble.append("rect")
        	.attr("x", width+100)
        	.attr("y", offset+320+10)
        	.attr("width", 18)
        	.attr("height", 18)
        	.style("fill", color);

       		legendNoble.append("text")
        	.attr("x", width +130)
        	.attr("y", offset+320+19)
        	.attr("dy", ".35em")
        	.style("text-anchor", "start")
        	.text(function(d) { return d; });

        	chart.append("text")
        	.attr("x", width)
        	.attr("y", offset+220-5)
        	.attr("dy", ".35em")
        	.style("text-anchor", "start")
        	.text("NOBLE");

        var legendConoco =d3.select("svg")
	       	.append("g")
        	.selectAll("g")
        	.data(conocoId.slice())
        	.enter().append("g")
        	.attr("class","legend")
            .attr("transform", function (d, i) {
            {
                return "translate(0," + i * 20 + ")"
            }
        	});
        	legendConoco.append("rect")
        	.attr("x", width+100)
        	.attr("y", offset+375+10)
        	.attr("width", 18)
        	.attr("height", 18)
        	.style("fill", color);

       		legendConoco.append("text")
        	.attr("x", width +130)
        	.attr("y", offset+375+19)
        	.attr("dy", ".35em")
        	.style("text-anchor", "start")
        	.text(function(d) { return d; });

        	chart.append("text")
        	.attr("x", width)
        	.attr("y", offset+272)
        	.attr("dy", ".35em")
        	.style("text-anchor", "start")
        	.text("CONOCO");



		//use bothData to begin with
		update(bothData);
				</script>
				<script>
					$(".dtab").click(function() {
						$.getScript("d.js");
						document.getElementById('y').style.display = 'none';

					})	
				
        </script>
		<script>
		$( "input" ).on( "click", function() {
		  $( "#log" ).html( $( "input:checked" ).val() + " is checked!" );
		});
		</script>

    </body>
	
</html>